<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:toolkit="http://schemas.microsoft.com/dotnet/2022/maui/toolkit"
             xmlns:local="clr-namespace:SecondsClient"
             x:Class="SecondsClient.MainPage"
              xmlns:lottie="clr-namespace:SkiaSharp.Extended.UI.Controls;assembly=SkiaSharp.Extended.UI">

    <Grid x:Name="MainGrid" Background="Black">
        <Grid.RowDefinitions>
            <RowDefinition x:Name="TopMarginRow" Height="0.25*"/>
            <RowDefinition x:Name="ScoreAndProgressGridRow" Height="2.5*"/>
            <RowDefinition x:Name="TargetSecondsRow" Height="8*"/>
            <RowDefinition x:Name="StopButtonRow" Height="2.5*"/>
            <RowDefinition x:Name="AdRow" Height="65"/>
            <RowDefinition x:Name="BottomMarginRow" Height="0.25*"/>
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition x:Name="LeftMarginCol" Width="1*"/>
            <ColumnDefinition x:Name="CentreCol" Width="12*"/>
            <ColumnDefinition x:Name="RightMarginCol" Width="1*"/>
        </Grid.ColumnDefinitions>

        <Grid x:Name="ScoreGrid" Grid.Row="1" Grid.Column="1"  RowDefinitions="*,*,*" ColumnDefinitions="*,*,*">
            <Label x:Name="EasyModeTitleLabel" Grid.Row="0" Grid.Column="0"
                   Text="Easy Mode" 
                   FontSize="20" 
                   Padding="0"
                   Margin="0"
                   VerticalTextAlignment="Center"
                   HorizontalTextAlignment="Center"
                   FontFamily="Rubik-Regular.ttf"/>

            <Label x:Name="ScoreTitleLabel" Grid.Row="0" Grid.Column="1" 
                   Text="Score"
                   FontSize="20"
                   Padding="0"
                   Margin="0"
                   VerticalTextAlignment="Center"
                   HorizontalTextAlignment="Center"
                   FontFamily="Rubik-Regular.ttf"/>

            <Label x:Name="HighScoreTitleLabel" Grid.Row="0" Grid.Column="2"
                   FontSize="20"
                   Text="High"
                   Padding="0"
                   Margin="0"
                   VerticalTextAlignment="Center"
                   HorizontalTextAlignment="Center"
                   FontFamily="Rubik-Regular.ttf"/>


            <Switch x:Name="EasyModeSwitch" Grid.Row="1" Grid.Column="0" 
                    IsToggled = "{Binding EasyModeSwitchIsToggled}" 
                    HorizontalOptions="Center"
                    VerticalOptions="Center"
                    Scale="1.2"
                    BackgroundColor="Black"
                    OnColor="White"/>

            <Label x:Name="ScoreLabel" Grid.Row="1" Grid.Column="1"  
                    Text="{Binding ScoreLabelText}"
                    FontSize="28" 
                    Padding="0"
                    Margin="0"
                    VerticalTextAlignment="Center"
                    HorizontalTextAlignment="Center"
                    HorizontalOptions="Center"
                    VerticalOptions="Center"
                    FontFamily="RubikMonoOne-Regular.ttf"
                    BackgroundColor="{Binding ScoreLabelBackgroundColor}"
                    TextColor="{Binding ScoreLabelTextColor}"/>

            <Label x:Name="HighScoreLabel" Grid.Row="1" Grid.Column="2"
                    Text="{Binding HighScoreLabelText}"
                    FontSize="28" 
                    Padding="0" 
                    Margin="0"
                    VerticalTextAlignment="Center"
                    HorizontalTextAlignment="Center"
                    HorizontalOptions="Center"
                    VerticalOptions="Center"
                    FontFamily="RubikMonoOne-Regular.ttf"
                    BackgroundColor="{Binding HighScoreLabelBackgroundColor}"
                    TextColor="{Binding HighScoreLabelTextColor}"/>

            <ProgressBar x:Name="ReserveProgressBar" Grid.Row="3" Grid.Column="0" Grid.ColumnSpan="3" 
            ScaleY="8" 
           
            VerticalOptions="End"                  
            ProgressColor="#05C405"
            IsVisible="true">
                <ProgressBar.Behaviors>
                    <toolkit:ProgressBarAnimationBehavior
                    x:Name="ProgressBarAnimationBehavior"
                    Progress="{Binding ReserveProgressProgressBar}" 
                    Length="250"/>
                </ProgressBar.Behaviors>
            </ProgressBar>
        </Grid>



        <Grid Grid.Row="2" Grid.Column="1">
            <Label x:Name="StartPageLabel" 
                FormattedText="{Binding StartPageLabelFormattedText}"
                IsVisible="{Binding StartPageLabelIsVisible}" 
                VerticalTextAlignment="Center"
                HorizontalTextAlignment="Center"
                BackgroundColor="Black"
                TextColor="White"/>

            <Image x:Name="TargetSecondsImage" 
                Margin="15"
                Source="{Binding TargetSecondsImageSource}"
                IsVisible="{Binding TargetSecondsImageIsVisible}">
            </Image>
            

            <!--<lottie:SKLottieView x:Name="PauseAnimation"
                                 Source="{Binding PauseAnimationSource}"
                                 IsVisible="{Binding PauseAnimationIsVisible}"
                                 IsAnimationEnabled="True"
                                 RepeatCount="-1"
                                 VerticalOptions="Center"
                                 HorizontalOptions="Center"
                                 HeightRequest="200"
                                 WidthRequest="200"
                                 Scale="1"/>-->


            <lottie:SKLottieView x:Name="PauseAnimation"
                                 Source="{Binding PauseAnimationSource}"
                                 IsVisible="{Binding PauseAnimationIsVisible}"
                                 IsAnimationEnabled="True"
                                 RepeatCount="-1"
                                 VerticalOptions="Center"
                                 HorizontalOptions="Center"/>

            <Label x:Name="GetReadyLabel" 
                Text="{Binding GetReadyLabelText}"
                IsVisible="{Binding GetReadyLabelIsVisible}" 
                FontFamily="RubikMonoOne-Regular.ttf"
                FontSize="{Binding GetReadyLabelFontSize}"
                TextColor="White"
                VerticalTextAlignment="Center"
                HorizontalTextAlignment="Center"
                VerticalOptions="Center"
                HorizontalOptions="Center"/>

            <Label x:Name="AccuracyLabel" 
                Text="{Binding AccuracyLabelText}"
                IsVisible="{Binding AccuracyLabelIsVisible}" 
                FontFamily="RubikMonoOne-Regular.ttf"
                FontSize="28"
                TextColor="{Binding AccuracyLabelTextColor}"
                VerticalTextAlignment="Center"
                HorizontalTextAlignment="Center"
                VerticalOptions="Center"
                HorizontalOptions="Center"/>

            <Label x:Name="GameOverLabel"  
                FormattedText="{Binding GameOverLabelFormattedText}"
                IsVisible="{Binding GameOverLabelIsVisible}" 
                VerticalTextAlignment="Center"
                HorizontalTextAlignment="Center"
                BackgroundColor="Black"
                TextColor="White"/>
        </Grid>

        <ImageButton x:Name="PlayButton" Grid.Row="3" Grid.Column="1"  
            SemanticProperties.Description="Play button"
            BackgroundColor="Black" 
            Source="playbutton.svg"
            Command="{Binding StartGameCommand}" 
            IsEnabled="{Binding PlayButtonIsEnabled}"
            IsVisible="{Binding PlayButtonIsVisible}"/>


        <ImageButton x:Name="StopButton" Grid.Row="3" Grid.Column="1"
            SemanticProperties.Description="Stop button" 
            
            Source="{Binding StopButtonImageSource}"
            Command="{Binding StopCommand}" 
            IsEnabled="{Binding StopButtonIsEnabled}"
            IsVisible="{Binding StopButtonIsVisible}"
            BackgroundColor="Black" />

        <!--<controls:MTAdView x:Name="myAds" AdsId="ca-app-pub-3940256099942544/6300978111" Grid.Row="4"/>-->


    </Grid>

</ContentPage>
